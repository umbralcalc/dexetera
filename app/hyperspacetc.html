<!DOCTYPE html>
<html>
<head>
    <title>Hyperspace Traffic Control</title>
    <link rel="icon" type="image/x-icon" href="assets/favicon.ico">
    <link rel="stylesheet" href="src/hyperspacetc/styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Arsenal+SC:ital,wght@0,400;0,700;1,400;1,700&family=Oxygen:wght@300;400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
</head>
<body>
    <div id="bkg" class="blurred">
    <svg version="1.1" viewBox="0.0 0.0 960.0 720.0" fill="none" stroke="none" stroke-linecap="square" stroke-miterlimit="10" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg">
        <clipPath id="p.0">
            <path d="m0 0l960.0 0l0 720.0l-960.0 0l0 -720.0z" clip-rule="nonzero"/>
        </clipPath>
        <g clip-path="url(#p.0)">
            <path fill="#000000" d="m0 0l960.0 0l0 720.0l-960.0 0z" fill-rule="evenodd"/>
            <path fill="#ffd966" d="m274.46194 391.958l0 0c0 -10.532562 8.53833 -19.070862 19.070862 -19.070862l0 0c5.0579224 0 9.908661 2.0092468 13.485138 5.585724c3.576477 3.576477 5.585724 8.427216 5.585724 13.485138l0 0c0 10.532532 -8.5383 19.070862 -19.070862 19.070862l0 0c-10.532532 0 -19.070862 -8.53833 -19.070862 -19.070862z" fill-rule="evenodd"/>
            <path fill="#ffd966" d="m456.00525 163.69817l0 0c0 -10.532547 8.53833 -19.070862 19.070862 -19.070862l0 0c5.0579224 0 9.908661 2.0092316 13.485138 5.585724c3.576477 3.576477 5.585724 8.427231 5.585724 13.485138l0 0c0 10.532547 -8.5383 19.070862 -19.070862 19.070862l0 0c-10.532532 0 -19.070862 -8.538315 -19.070862 -19.070862z" fill-rule="evenodd"/>
            <path fill="#ffd966" d="m603.6982 360.0l0 0c0 -10.532562 8.538269 -19.070862 19.070862 -19.070862l0 0c5.0579224 0 9.90863 2.0092468 13.485107 5.585724c3.576477 3.576477 5.5857544 8.427216 5.5857544 13.485138l0 0c0 10.532562 -8.53833 19.070862 -19.070862 19.070862l0 0c-10.532593 0 -19.070862 -8.5383 -19.070862 -19.070862z" fill-rule="evenodd"/>
            <path fill="#000000" fill-opacity="0.0" d="m-1.243669 162.44138l281.29135 216.0315" fill-rule="evenodd"/>
            <path stroke="#ffffff" stroke-width="3.0" stroke-linejoin="round" stroke-linecap="butt" d="m-1.243669 162.44138l281.29135 216.0315" fill-rule="evenodd"/>
            <path fill="#000000" fill-opacity="0.0" d="m333.5328 721.2336l-40.0 -310.2047" fill-rule="evenodd"/>
            <path stroke="#ffffff" stroke-width="3.0" stroke-linejoin="round" stroke-linecap="butt" d="m333.5328 721.2336l-40.0 -310.2047" fill-rule="evenodd"/>
            <path fill="#000000" fill-opacity="0.0" d="m461.59097 177.1833l-154.58267 201.29134" fill-rule="evenodd"/>
            <path stroke="#ffffff" stroke-width="3.0" stroke-linejoin="round" stroke-linecap="butt" d="m461.59097 177.1833l-154.58267 201.29134" fill-rule="evenodd"/>
            <path fill="#000000" fill-opacity="0.0" d="m488.56125 177.1833l120.724396 169.32283" fill-rule="evenodd"/>
            <path stroke="#ffffff" stroke-width="3.0" stroke-linejoin="round" stroke-linecap="butt" d="m488.56125 177.1833l120.724396 169.32283" fill-rule="evenodd"/>
            <path fill="#000000" fill-opacity="0.0" d="m312.60367 391.958l291.08664 -31.968506" fill-rule="evenodd"/>
            <path stroke="#ffffff" stroke-width="3.0" stroke-linejoin="round" stroke-linecap="butt" d="m312.60367 391.958l291.08664 -31.968506" fill-rule="evenodd"/>
            <path fill="#000000" fill-opacity="0.0" d="m461.59097 150.21303l-153.88977 -153.92126" fill-rule="evenodd"/>
            <path stroke="#ffffff" stroke-width="3.0" stroke-linejoin="round" stroke-linecap="butt" d="m461.59097 150.21303l-153.88977 -153.92126" fill-rule="evenodd"/>
            <path fill="#000000" fill-opacity="0.0" d="m571.08093 -2.4798894l-82.519684 152.69292" fill-rule="evenodd"/>
            <path stroke="#ffffff" stroke-width="3.0" stroke-linejoin="round" stroke-linecap="butt" d="m571.08093 -2.4798894l-82.519684 152.69292" fill-rule="evenodd"/>
            <path fill="#000000" fill-opacity="0.0" d="m963.6903 157.52493l-469.54333 6.173233" fill-rule="evenodd"/>
            <path stroke="#ffffff" stroke-width="3.0" stroke-linejoin="round" stroke-linecap="butt" d="m963.6903 157.52493l-469.54333 6.173233" fill-rule="evenodd"/>
            <path fill="#000000" fill-opacity="0.0" d="m622.76904 379.07086l-36.91339 342.17322" fill-rule="evenodd"/>
            <path stroke="#ffffff" stroke-width="3.0" stroke-linejoin="round" stroke-linecap="butt" d="m622.76904 379.07086l-36.91339 342.17322" fill-rule="evenodd"/>
            <path fill="#000000" fill-opacity="0.0" d="m636.25415 373.48514l195.74805 347.74802" fill-rule="evenodd"/>
            <path stroke="#ffffff" stroke-width="3.0" stroke-linejoin="round" stroke-linecap="butt" d="m636.25415 373.48514l195.74805 347.74802" fill-rule="evenodd"/>
            <path fill="#000000" fill-opacity="0.0" d="m-3.668866 558.7975l283.71652 -153.35434" fill-rule="evenodd"/>
            <path stroke="#ffffff" stroke-width="3.0" stroke-linejoin="round" stroke-linecap="butt" d="m-3.668866 558.7975l283.71652 -153.35434" fill-rule="evenodd"/>
            <path id="serve-queue-left-node-middle-outside-triangle" stroke="#00FF00" stroke-width="5.0" stroke-linejoin="round" stroke-linecap="butt" d="m-3.668866 558.7975l283.71652 -153.35434" fill-rule="evenodd" display="none"/>
            <path id="serve-queue-left-node-upper-outside-triangle" stroke="#00FF00" stroke-width="5.0" stroke-linejoin="round" stroke-linecap="butt" d="m-1.243669 162.44138l281.29135 216.0315" fill-rule="evenodd" display="none"/>
            <path id="serve-queue-left-node-lower-outside-triangle" stroke="#00FF00" stroke-width="5.0" stroke-linejoin="round" stroke-linecap="butt" d="m333.5328 721.2336l-40.0 -310.2047" fill-rule="evenodd" display="none"/>
            <path id="serve-queue-upper-node-outside-triangle" stroke="#00FF00" stroke-width="5.0" stroke-linejoin="round" stroke-linecap="butt" d="m963.6903 157.52493l-469.54333 6.173233" fill-rule="evenodd" display="none"/>
            <path id="serve-queue-upper-node-inside-triangle" stroke="#00FF00" stroke-width="5.0" stroke-linejoin="round" stroke-linecap="butt" d="m461.59097 177.1833l-154.58267 201.29134" fill-rule="evenodd" display="none"/>
            <path id="serve-queue-right-node-lower-inside-triangle" stroke="#00FF00" stroke-width="5.0" stroke-linejoin="round" stroke-linecap="butt" d="m312.60367 391.958l291.08664 -31.968506" fill-rule="evenodd" display="none"/>
            <path id="serve-queue-right-node-upper-inside-triangle" stroke="#00FF00" stroke-width="5.0" stroke-linejoin="round" stroke-linecap="butt" d="m488.56125 177.1833l120.724396 169.32283" fill-rule="evenodd" display="none"/>
            <path id="queue-left-node-middle-outside-triangle" stroke="#ff0000" stroke-width="5.0" stroke-linejoin="round" stroke-linecap="butt" d="M280.047654 405.44316 l-18.5007167062 10.0" fill-rule="evenodd"/>
            <path id="queue-left-node-upper-outside-triangle" stroke="#ff0000" stroke-width="5.0" stroke-linejoin="round" stroke-linecap="butt" d="M280.047681 378.47288 l-79.31 -60.91" fill-rule="evenodd"/>
            <path id="queue-left-node-lower-outside-triangle" stroke="#ff0000" stroke-width="5.0" stroke-linejoin="round" stroke-linecap="butt" d="M293.5328 411.0289 l12.79 99.18" fill-rule="evenodd"/>
            <path id="queue-upper-node-outside-triangle" stroke="#ff0000" stroke-width="5.0" stroke-linejoin="round" stroke-linecap="butt" d="M494.14697 163.698163 l76.0611708646 -1.0" fill-rule="evenodd"/>
            <path id="queue-upper-node-inside-triangle" stroke="#ff0000" stroke-width="5.0" stroke-linejoin="round" stroke-linecap="butt" d="M461.59097 177.1833 l-10.00 13.0215980873" fill-rule="evenodd"/>
            <path id="queue-right-node-lower-inside-triangle" stroke="#ff0000" stroke-width="5.0" stroke-linejoin="round" stroke-linecap="butt" d="M603.69031 359.989494 l-40.0 4.39298842434" fill-rule="evenodd"/>
            <path id="queue-right-node-upper-inside-triangle" stroke="#ff0000" stroke-width="5.0" stroke-linejoin="round" stroke-linecap="butt" d="M609.285646 346.50613 l-58.05 -81.42" fill-rule="evenodd"/>
        </g>
    </svg>
    </div>
    <div id="overlay">
        <div class="panels-container">
            <div class="panel">
                <h2>The role of Hyperspace Traffic Control:</h2>
                <p>1. The inter-galactic travel business is booming, but there are only a limited number of hyperspace jump points to connect the cosmos.</p>
                <p>2. These jump points represent nodes of a hyperspace network of lines through which space traffic may pass in either direction.</p>
                <p>3. Hyperspace Traffic Control is tasked with monitoring and controlling congestion along these busy lines, where jump points may only serve a single travel direction at any point in time.</p>
                <p>4. You are now in charge of Hyperspace Traffic Control at an important cluster for the next 10 years, maximising the flow of inter-galactic traffic if you can.</p>
                <p>5. Good luck.</p>
            </div>
            <div class="panel">
                <h2>How to play:</h2>
                <p>Edit/run this code below and then click the "Start Simulation" button to play:</p>
                <pre><code class="language-python">
from dexact.server import (
    ActionTaker, launch_websocket_server
)

class HyperspaceTCActionTaker(ActionTaker):
    @property
    def state_map(self) -> dict[int, str]:
        """You can ignore this config property."""
        return {
            0: "actions",
            1: "another_state",
            ...
        }

    def take_next_action(
        self, 
        time: float, 
        states: dict[str, list[float]]
    ) -> list[float]:
        """
        Modify this method to play!
        Also check out the controller cheatsheet if needed:
        umbralcalc.github.io/dexetera/cmd/hyperspacetc/cheatsheet.md
        """
        return [s + 0.1 for s in states["actions"]]

if __name__ == "__main__":
    launch_websocket_server(HyperspaceTCActionTaker())
                </code></pre>
                <button id="startButton">Start Simulation</button>
            </div>
        </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/python.min.js"></script>
    <script>hljs.highlightAll();</script>
    <script src="src/google-protobuf.js"></script>
    <script src="src/partition_state_pb.js"></script>
    <script src="src/wasm_exec.js"></script>
    <script>
        document.getElementById('startButton').addEventListener('click', () => {
            const worker = new Worker('src/worker.js');
            worker.onmessage = function(event) {
                if (event.data.type === 'partitionState') {
                    const data = event.data.data;
                    updateViz(data);
                }
            };
            worker.postMessage({ 
                action: 'start', 
                wasmBinary: 'hyperspacetc/main.wasm',
                serverPartitionIndices: [0],
                stopAtSimTime: 3652.5,
                debugMode: false
            });
            document.getElementById('bkg').classList.remove('blurred');
            document.getElementById('overlay').style.display = 'none';
        });
        function updateViz(data) {
            // TODO: Add viz code here...
            console.log('Updating Viz:', data);
        }
    </script>
</body>
</html>
